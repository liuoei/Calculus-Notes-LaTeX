\chapter{导数与微分}  
\section{导数的有关定义}
\begin{definition}{导数}{derivative}
    设函数 $y=f(x),x\in D$。现有一点 $x_0\in D$且 $x_0+\Delta x \in D$。定义 $\Delta y=f(x_0+\Delta x)-f(x_0)$。

    若极限
    \begin{align}
        \lim_{\Delta x \to 0}\frac{\Delta y}{\Delta x}
    \end{align}
    存在，则称 $f(x)$ 在 $x_0$ 处可导，称该极限为 $f(x)$ 在 $x_0$ 处的导数。记作
    \begin{align}
        \lim_{\Delta x \to 0}\frac{\Delta y}{\Delta x} \triangleq f'(x_0)
    \end{align}
\end{definition}

\begin{note}
    \begin{enumerate}
        \item 等价定义：
        
        由于当 $x \to x_0$时，有 $f(x) \to f(x_0)$，而 $\Delta x =x-x_0$，$\Delta y = f(x)-f(x_0)$，从而导数又可以表示为
        \begin{align}
            \lim_{x \to x_0}\frac{ f(x)-f(x_0)}{x-x_0}\triangleq f'(x_0)
        \end{align}
        \item 左右导数
        
        $\Delta x \to 0$ 分为两种情况：$\Delta x  \to 0^{-}$ 以及
        $\Delta x  \to 0^{+}$；同理，$ x \to a$也分为两种情况：$ x \to a^{-}$以及 $ x \to a^{+}$。从而我们可以类似地得到：

        \begin{align}
            \lim_{\Delta x \to 0^{-}}\frac{\Delta y}{\Delta x} \triangleq f_{-}'(x_0) 
       \end{align}

       \begin{align}
           \lim_{\Delta x \to 0^{+}}\frac{\Delta y}{\Delta x} \triangleq f_{+}'(x_0) 
       \end{align}

        并且，可以给出一点导数存在的充要条件，也即：

        $f'(x_0)$ 存在 $\Leftrightarrow f_{-}'(x_0),f_{+}'(x_0) $ 均存在且相等。

        \item 可导性与连续性
        
        $f(x)$ 在 $x_0$ 处可导，则 $f(x)$ 在$x_0$ 处连续，反之则不然。证明从略。
        \begin{example}
            设 \begin{align*}
                f(x) = \begin{cases}
                e^x-1, & x<0,\\
                \ln(1+2x), & x \ge 0
            \end{cases}
        \end{align*},
            
            求 $f'(0)$。
        \end{example}
        
        \begin{solution}
            先考虑连续性。
        
            由于 $f(0-0)=0=f(0+0)$，故 $f(x)$ 在 $x=0$ 处连续。
        
            再考虑可导性。
        
            由于 $f_{-}'(0)=\lim\limits_{x\to 0_{-}}\frac{f(x)-0}{x-0}=\lim\limits_{x \to 0_{-}}\frac{e^x-1}{x}=1$，
        
            $f_{+}'(0)=\lim\limits_{x\to 0_{+}}\frac{f(x)-0}{x-0}=\lim\limits_{x \to 0_{-}}\frac{\ln(1+2x)}{x}=2 \neq f_{-}'(0)$，
        
            故 $f'(0)$ 不存在。
        \end{solution}

        \item 已知 $f(x)$ 连续，
        
        若 $\lim\limits_{x \to a}\frac{f(x)-b}{x-a}=A$，则 $f(a)=b,f'(a)=A$。

        这是因为当 $\lim\limits_{x \to a}\frac{f(x)-b}{x-a}=A$时，由于分母为 $0$，则分子必须也为 $0$ 才能存在极限；根据导数定义又能推出 $f'(a)=A$。
        \end{enumerate}
        \end{note}
    \section{可微}
    \begin{definition}{可微}{kewei}
    设函数 $y=f(x),x\in D$。现有一点 $x_0\in D$且 $x_0+\Delta x \in D$。定义 $\Delta y=f(x_0+\Delta x)-f(x_0)$。若$\Delta y=A\Delta x+o(\Delta x)$，则称 $f(x)$在 $x_0$ 可微。将 $A\Delta x$记作 $\dd{y}$，称为 $f(x)$ 在 $x=x_0$处的微分。
    \end{definition}
    
    \begin{note}
        \begin{enumerate}
            \item 可导 $\Leftrightarrow$ 可微；
            \item 若$\Delta y = A\Delta x+o(\Delta x)$，则 $A=f'(x_0)$；
            \item 设 $y=f(x)$ 可导，则 $\dd{y} = \dd{f(x)}=f'(x)\dd{x}$，如 $\dd{x^3}=3x^2\dd{x}$。 
        \end{enumerate}
    \end{note}
    \section{求导工具}
    （一）求导公式：
    \begin{enumerate}
        \item $C'=0$
        \item $(x^a)'=ax^{a-1}$
        \item $(a^x)'=a^x\ln a$，特别地，$(e^x)'=e^x$
        \item $(\log_a x)'=\displaystyle\frac{1}{x\ln a}$，特别地，$(\ln x)'=\displaystyle\frac{1}{x}$
        \item $(\sin x)'=\cos x,(\cos x)'=-\sin x,(\tan x)'=\sec ^2 x,(\cot x)'= - \csc^2 x,$
        
        $(\sec x)'=\sec\tan x,(\csc x)' = -\csc\cot x$
        \item $(\arcsin x)' = \displaystyle\frac{1}{\sqrt{1-x^2}},(\arccos x)' = -\displaystyle\frac{1}{\sqrt{1-x^2}},(\arctan x)' = \displaystyle\frac{1}{1+x^2}$,
        
        $(\arccot x)' = -\displaystyle\frac{1}{1+x^2}$。
    \end{enumerate}

    （二）四则运算：
    \begin{enumerate}
        \item $(u\pm v)'=u'\pm v$
        \item 
        \begin{enumerate}
            \item $(ku)'=ku'$
            \item $(uv)'=uv'+u'v$
            \item $(uvw)'=u'vw+uv'w+uvw'$
            \begin{example}
                $f(x) = x(x+1) \cdots (x+99)$，求$f'(0)$。
            \end{example}
            \begin{solution}
                记$g(x) = (x+1)(x+2)\cdots(x+99)$，根据乘积求导法则，$(xg(x))' = g(x)+xg'(x)$，将$x=0$代入得 $f'(0)=99!$。
            \end{solution}
        \end{enumerate}
        \item $(\displaystyle\frac{u}{v})' = \displaystyle\frac{u'v-uv'}{v^2}$。
    \end{enumerate}

    （三） 复合函数
    \begin{theorem}{链式法则}{chain value}
        若 $y = f(u)$ 可导，$u = \varphi(x)$ 可导且 $\var\phi'(x)\neq 0$，则 $y=f(\varphi(x))$可导且
        \begin{align*}
            \frac{\dd{y}}{\dd{x}} &= \frac{\dd{y}}{\dd{u}}\cdot \frac{\dd{u}}{\dd{x}}\\
            &=f'(u) \cdot \varphi'(x)\\
            &=f'[\varphi(x)]\cdot \varphi'(x)
        \end{align*}
    \end{theorem}

    \begin{proof}
        由于 $\varphi'(x)=\lim\limits_{\Delta x \to 0}\displaystyle\frac{\Delta u}{\Delta x}\neq 0$，故 $\Delta u$ 与 $\Delta x$ 为同阶无穷小，也即 $\Delta u = O(\Delta x)$。而 
        \begin{align*}
        \displaystyle\frac{\dd{y}}{\dd{x}} &= \lim\limits_{\Delta x \to 0}\displaystyle\frac{\Delta y}{\Delta x}\\
        &=\lim\limits_{\Delta x \to 0}\displaystyle\frac{\Delta y}{\Delta u} \cdot \displaystyle\frac{\Delta u}{\Delta x}\\
        &=\lim\limits_{\Delta x \to 0}\displaystyle\frac{\Delta y}{\Delta u} \cdot \lim\limits_{\Delta x \to 0}\displaystyle\frac{\Delta u}{\Delta x}\\
        &=\lim\limits_{\Delta u \to 0}\displaystyle\frac{\Delta y}{\Delta u} \cdot \varphi'(x) \text{（注：这一步用到了同阶无穷小这个条件）}\\
        &=f'[\varphi(x)]\cdot\varphi'(x). 
        \end{align*}
        \qed
    \end{proof}

    \begin{example}
        设 $y = \ln\arctan x^2$，求 $\displaystyle\frac{\dd{y}}{\dd{x}}$。
    \end{example}

    \begin{solution}
        $\displaystyle\frac{\dd{y}}{\dd{x}} = \displaystyle\frac{1}{\arctan x^2}\cdot \displaystyle\frac{1}{1+(x^2)^2}\cdot 2x$
    \end{solution}

    \begin{example}
        $ y = e^{(\sin{\frac{1}{x}})^2}$，求 $y'$。
    \end{example}

    \begin{solution}
        $ y' = e^{(\sin{\frac{1}{x}})^2}\cdot 2\sin{\frac{1}{x}}\cdot \cos{\frac{1}{x}} \cdot (-\frac{1}{x^2})$
    \end{solution}

    （四）反函数导数
    
    $ y = f(x) \Rightarrow  x = \varphi(y)$，称为反函数。
    \begin{example}
        求 $ y=\ln{(x+\sqrt{1+x^2})} $ 的反函数。
    \end{example}

    \begin{solution}
        因为$ y=\ln{(x+\sqrt{1+x^2})} $，故 $e^y = x+\sqrt{1+x^2}$。从而，由于 $(x+\sqrt{1+x^2})(-x+\sqrt{1+x^2})=1=e^y\cdot e^{-y}$（这里用到了平方差公式），相减可得：$x=\displaystyle\frac{e^y-e^{-y}}{2}$。
    \end{solution}

    \begin{theorem}{反函数求导}{fhsqd}
        设 $ y = f(x) $ 可导，且 $f'(x) \neq 0$ ,则 $ \varphi'(y) = \displaystyle\frac{1}{f'(x)} $。
    \end{theorem}

    \begin{proof}
        由于 $ f'(x) = \lim\limits_{\Delta x \to 0} \displaystyle\frac{\Delta y}{\Delta x} \neq 0 $，从而 $\Delta y = O(\Delta x)$。而 $ \varphi'(y) = \lim\limits_{\Delta y \to 0} \displaystyle\frac{\Delta x}{\Delta y} = \lim\limits_{\Delta y \to 0} \displaystyle\frac{1}{\frac{\Delta y}{\Delta x}}$。由$\Delta y = O(\Delta x)$ ，得$ \varphi'(y) =\lim\limits_{\Delta x \to 0} \displaystyle\frac{1}{\frac{\Delta y}{\Delta x}} = \displaystyle\frac{1}{f'(x)}$。
    \end{proof}
 
    \subsubsection*{多种求导题型归纳}
    \begin{enumerate}
        \item 显函数求导
        \begin{example}
            $ y = e^{2x}\sin x + \ln^2{\tan(e^x+2x)}$ ，求 $ y' $。
        \end{example}
        \begin{solution}
            $ y = e^{2x}\cos x + 2e^{2x}\sin x + 2\ln{\tan(e^x + x^2)}\cdot\displaystyle\frac{1}{\tan(e^x+x^2)}\cdot\sec^2(e^x+x^2)\cdot(e^x+2x)$
        \end{solution}
        \item 复合函数求导
        \begin{example}
            $ y = \arctan^2\displaystyle\frac{1-x}{1+x} $，求 $y'$ 。
        \end{example}
        \begin{solution}
            $y' = 2\arctan\displaystyle\frac{1-x}{1+x}\cdot\displaystyle\frac{1}{1+(\frac{1-x}{1+x})^2}\cdot\displaystyle\frac{-(1+x)-(1-x)}{1+x}$.
        \end{solution}
        \item 隐函数求导
        \begin{example}
            已知 $x,y$ 满足如下等式:
            \begin{align*}
                e^{xy} = x^2+y^2+1
            \end{align*}
            求$\displaystyle\frac{\dd y}{\dd x}$.
        \end{example}
        \begin{solution}
            在上式两边同时对 $x$ 求导，可以得到：$e^{xy}(y+x\displaystyle\frac{\dd y}{\dd x}) = 2x+2y\displaystyle\frac{\dd y}{\dd x}$。从而，$\displaystyle\frac{\dd y}{\dd x} = \displaystyle\frac{2x-ye^{xy}}{xe^{xy}-2y}$.
        \end{solution}
        \begin{example}
            已知 $x,y$ 满足如下等式:
            \begin{align*}
                2^{xy} + x^2 = y
            \end{align*}
            求$\dd y \big |_{x=0}$。
        \end{example}
        \begin{solution}
            根据等式可得，$x=0$ 时，$y = 1$。与上一题类似，两边同时求导可得：$2^{xy}\ln 2(y+x\displaystyle\frac{\dd y}{\dd x}) + 2x = \displaystyle\frac{\dd y}{\dd x}$。将$x=0$, $y = 1$代入可得，$\displaystyle\frac{\dd y}{\dd x}\bigg |_{x=0} = \ln 2$。从而，$\dd y \big |_{x=0} = \ln 2 \dd x$.
        \end{solution}
        \item 参数方程确定的函数求导
    \end{enumerate}






